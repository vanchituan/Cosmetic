@model DataLayer.Framework.Order
@{
    ViewBag.Title = "Thanh toán";
    Layout = "~/Views/Shared/_FrontendLayout.cshtml";
}
@{
    var list = (List<CosmeticMVC.Models.CartItem>)ViewBag.list;

}

@section jsFooter{
    <style>
        .top-buffer {
            margin-top: 40px;
        }
    </style>

    <link href="/Assets/Client/css/site-demos.css" rel="stylesheet" />
    <script src="/Assets/Client/js/jquery-1.11.3.min.js"></script>

    <script src="/Assets/Client/js/jquery.validate.min.js"></script>
    <script src="/Assets/Client/js/additional-methods.min.js"></script>
    <script src="~/Assets/Client/js/controller/ValidateController.js"></script>
    <script src="/Assets/Client/js/controller/CartController.js"></script>
}

<div class="content">
    <div class="section group">
        @if (list.Count > 0) // thì mới hiển thị bảng
        {
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Mã SP</th>
                        <th>Tên SP</th>
                        <th>Ảnh</th>
                        <th>SL</th>
                        <th>Đơn giá</th>
                        <th>Thành tiền</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in list)
                    {
                        <tr>
                            <td>@item.Product.Id</td>
                            <td>@item.Product.Name</td>
                            <td><img src="@item.Product.Image" class="fancybox" style="cursor:pointer; width:25px; height:25px;" /></td>
                            <td>@item.Quantity</td>
                            <td>@item.Product.Price.GetValueOrDefault(0).ToString("N0")</td>
                            <td>@((item.Product.Price.GetValueOrDefault(0) * item.Quantity).ToString("N0"))</td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="5">Tổng cộng</td>
                        <td colspan="2">@Session["Total"]</td>
                    </tr>
                </tfoot>
            </table>

        }
    </div>
    <div class="section group">

        @using (Html.BeginForm("Payment", "Cart", FormMethod.Post))
            {
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="control-label col-md-2">Người nhận</label>
                    <div class="col-md-6">
                        @Html.TextBoxFor(m => m.ShipName, new { @class = "form-control", @required = "true" })
                    </div>
                </div>

                @if (Session[CommonConstant.UserSession] == null) // khach le
                {
                    <div class="form-group">
                        <label class="control-label col-md-2">Điện thoại</label>
                        <div class="col-md-6">
                            @Html.TextBoxFor(m => m.ShipMobile, new { @class = "form-control", @required = "true" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-2">Email</label>
                        <div class="col-md-6">
                            @Html.TextBoxFor(m => m.ShipEmail, new { @class = "form-control", @required = "true" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-2">Số nhà, tên đường</label>
                        <div class="col-md-6">
                            @Html.TextBoxFor(m => m.ShipAddress, new { @class = "form-control", @required = "true" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-2">Tỉnh thành</label>
                        <div class="col-md-6">
                            @Html.DropDownList("ProvinceId", new SelectList(new string[] { }), new { @class = "form-control", @id = "ProvinceId" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-2">Quận huyện</label>
                        <div class="col-md-6">
                            @Html.DropDownList("DistrictId", new SelectList(new string[] { }), new { @class = "form-control", @id = "DistrictId" })
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-2">Phường xà</label>
                        <div class="col-md-6">
                            @Html.DropDownList("PrecinctId", new SelectList(new string[] { }), new { @class = "form-control", @id = "PrecinctId" })
                        </div>
                    </div>
                }
                <div class="row top-buffer">
                    <button type="submit" class="btn btn-info">Gửi đơn hàng</button>
                </div>
            </div>
        }
    </div>
</div>
